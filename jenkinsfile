

pipeline{
    agent any
    stages{
        stage('start')
        {
            steps
            {
                sh 'echo "welcome to jenkins "'
              //  sh 'echo "how r u"'
            }
        }
         stage('download')
        {
            steps
            {
                git 'https://github.com/m-chiranjeevi1/spring-boot-demo-docker1.git'
            }
        }
        stage('build')
        {
            steps
            {
               sh 'mvn package'
            }
        }
        stage('nexus artfactory uploader')
        {
            steps
            {
              nexusArtifactUploader artifacts: [[artifactId: 'spring', classifier: '', file: '/home/ubuntu/.jenkins/workspace/job1/target/spring-boot.jar', type: 'jar']], 
              credentialsId: 'c00bd334-ffe3-4444-8b1e-9b47658e885d',
              groupId: 'com.javainterviewpoint', 
              nexusUrl: '172.31.6.85:8081',
              nexusVersion: 'nexus3', 
              protocol: 'http', 
              repository: 'nexus-repo', 
              version: 'boot'
            }
        }
        
   /*
        stage('deploy')
        {
            steps
            {
                sh 'scp /home/ec2-user/.jenkins/workspace/pipeline2/target/spring-boot.jar ubuntu@172.31.9.214:/var/lib/spring-boot.jar'
            }
        }
   */    
    }
}
